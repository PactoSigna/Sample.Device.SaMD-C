---
type: requirement
id: SRS-005
title: Audit Log Generation
status: approved
req_type: regulatory
format: user_story
author: rune@ords.io
reviewers:
  - quality
approvers:
  - engineering
---

# Software Requirement: Audit Log Generation

**Derives from:** [PRS-004](../../product/requirements/PRS-004.md)

## User Story

As a compliance officer responsible for demonstrating 21 CFR Part 11 adherence,
I want the system to automatically generate complete, immutable audit log entries for every data lifecycle event,
so that I can produce a reliable chain of custody for all electronic records during an FDA inspection or internal audit.

## Acceptance Criteria

**Scenario: Data creation event is logged**

```gherkin
Given a user creates a new record in the system
When the creation action completes
Then an audit log entry is generated within 100 ms
And the entry contains: timestamp (ISO 8601 UTC), user ID, action type "create", resource type, resource ID, new value, IP address, and session ID
```

**Scenario: Data modification event is logged**

```gherkin
Given a user updates an existing record
When the update action completes
Then an audit log entry is generated within 100 ms
And the entry contains the previous value and the new value alongside all standard fields
```

**Scenario: Data deletion event is logged**

```gherkin
Given a user deletes a record
When the deletion action completes
Then an audit log entry is generated within 100 ms
And the entry records the action type "delete" and the ID of the deleted resource
```

**Scenario: Audit entries cannot be modified or deleted**

```gherkin
Given an audit log entry has been written
When an administrator or system process attempts to modify or delete the entry
Then the attempt is rejected with an authorisation error
And a new audit entry is generated recording the attempted modification
```

**Scenario: Audit log is queryable by compliance officers**

```gherkin
Given audit log entries exist for various events
When a compliance officer queries by time range, user ID, or resource type
Then matching entries are returned in ascending chronological order
And the query completes within 5 seconds for date ranges up to 90 days
```
